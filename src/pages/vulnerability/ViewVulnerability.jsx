import axios from "axios";
import { useState, useEffect } from "react";
import { useParams } from "react-router-dom";

function ViewVulnerability() {
    const [vulnerability, setVulnerability] = useState({});

    const user = JSON.parse(localStorage.getItem("user"));

    const { vId } = useParams();

    useEffect(() => {
        axios.post(`${process.env.REACT_APP_BACKEND_URL}/v1/getVulnerability`, { id: vId }, { headers: { 'x-access-token': `${user.accessToken}` } }).then(response => {
            setVulnerability(response.data.vulnerability);
        }).catch(error => console.log(error))
    }, []);

    return (
        <div className="">
            <table>
                <tbody>
                    <tr>
                        <th>Vulnerability</th>
                        <td>
                            <span>
                                {vulnerability.Vulnerability}
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th>Severity</th>
                        <td>
                            <span>{vulnerability.Severity}</span>
                        </td>
                    </tr>
                    <tr>
                        <th>Description</th>
                        <td>
                            <span>{vulnerability.Description}</span>
                        </td>
                    </tr>
                    <tr>
                        <th>Remediation</th>
                        <td>
                            <span>
                                {vulnerability.Remediation}
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th>References</th>
                        <td>
                            <span>
                                {vulnerability.References}
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    )
}

export default ViewVulnerability;
